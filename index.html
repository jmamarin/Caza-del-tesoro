function cargarDesdeArchivo(input) {
  const file = input.files[0];
  if (!file) return;

  const reader = new FileReader();
  reader.onload = function(e) {
    try {
      const data = JSON.parse(e.target.result);
      if (Array.isArray(data.grupos)) {
        const container = document.getElementById("grupos-container");
        container.innerHTML = '';
        
        data.grupos.forEach((grupoData, index) => {
          // ðŸ”§ Compatibilidad con versiones antiguas:
          let miembros = grupoData.miembros || [];
          if (miembros.length > 0 && miembros[0] === grupoData.docente) {
            miembros = miembros.slice(1); // elimina duplicado del docente
          }

          const nuevoGrupo = document.createElement("div");
          nuevoGrupo.className = "participante-group";
          nuevoGrupo.innerHTML = `
            <h3><input type="text" class="editable group-name" value="${grupoData.nombre || `Equipo ${index+1}`}"></h3>
            <ul>
              <li>
                <div class="docente-container">
                  <input type="text" class="editable" value="${grupoData.docente || `Docente ${index+1}`}">
                  <span class="docente-label">Docente</span>
                </div>
              </li>
              ${(miembros.length > 0 ? miembros : ["Estudiante 1", "Estudiante 2", "Estudiante 3", "Estudiante 4"])
                .map((m, i) => `<li><input type="text" class="editable" value="${m || `Estudiante ${i+1}`}"></li>`)
                .join('')}
            </ul>
          `;
          container.appendChild(nuevoGrupo);
        });
      }
    } catch (error) {
      alert("Error al cargar el archivo: " + error.message);
    }
  };
  reader.readAsText(file);
}
